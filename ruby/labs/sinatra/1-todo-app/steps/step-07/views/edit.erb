<h2>Edit Task</h2>
<a href="/tasks" class="btn btn-secondary">‚Üê Back</a>

<div class="form-container">
  <% if @task.errors.any? %>
    <div class="alert alert-danger">
      <ul>
        <% @task.errors.full_messages.each do |msg| %>
          <li><%= h(msg) %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <form action="/tasks/<%= @task.id %>" method="post" class="task-form">
    <input type="hidden" name="_method" value="put">

    <div class="form-group">
      <label for="title">Title *</label>
      <input type="text" id="title" name="title" class="form-control"
             value="<%= h(@task.title) %>" required>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" name="description" class="form-control" rows="4"><%= h(@task.description || '') %></textarea>
    </div>

    <div class="form-group">
      <label for="category_id">Category</label>
      <select id="category_id" name="category_id" class="form-control">
        <option value="">-- No Category --</option>
        <% @categories.each do |category| %>
          <option value="<%= category.id %>"
                  <%= 'selected' if @task.category_id == category.id %>>
            <%= h(category.name) %>
          </option>
        <% end %>
      </select>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Update Task</button>
      <a href="/tasks" class="btn btn-secondary">Cancel</a>
    </div>
  </form>

  <div class="danger-zone">
    <h3>Danger Zone</h3>
    <form action="/tasks/<%= @task.id %>" method="post">
      <input type="hidden" name="_method" value="delete">
      <button type="submit" class="btn btn-danger"
              onclick="return confirm('Delete this task?')">Delete Task</button>
    </form>
  </div>
</div>
